<!-- Get Buyer Schema-->
<basis core="api" name="api.schema" run="atclient" url="https://basisfly.com/panel/main/view/[##cms.cookie.rkey##]"
    method="post" triggers="cms.runbuyer" if="{##cms.runbuyer##}" body='{
        "member": [
                {
                        "type": "list",
                        "name": "buyer_info",
                        "request": "buyer_info",
                        "lid": "1",
                        "rkey": "[##cms.cookie.rkey##]"
                }
        ]
}' onprocessed="onProcessedBuyerSchema"></basis>
<!-- Get Buyer Schema (Mobile-Email)-->
<basis core="api" name="api.useridentityinfo" run="atclient" triggers="cms.runbuyer" if="{##cms.runbuyer##}"
    url="https://api.trust-login.com/[##cms.cookie.rkey##]/useridentityinfo" method="get"
    onprocessed="onProcessedBuyerIdentityInfo">
</basis>
<!-- Save Buyer Schema-->
<basis core="api" name="api.edituser" if="{##cms.editUser.run|(false)##}" run="atclient"
    url="https://api.trust-login.com/schema/{##cms.editUser.rkey##}/editobject" method="post"
    body='{##cms.editUser.objEditUser##}' triggers="cms.editUser">
</basis>
<!-- Get Commission-->
<basis core="api" name="api.commission" url="{##cms.commission.url##}" method="post" content-type="application/json"
    run="atclient" triggers="cms.commission" if="{##cms.commission.run|(false)##}" body='{
        "rkey": "[##cms.cookie.rkey##]",
        "dmnid": "[##cms.cms.domainid##]",
        "schemaid": "{##cms.commission.schemaid##}",
        "SessionId": "{##cms.commission.SessionId##}",
        "{##cms.commission.productIdField##}": "{##cms.commission.Id##}",
        "lid":"1"
    }' onprocessed="onProcessedCommission">
</basis>

<!-- Get Payment Price-->
<basis core="api" name="api.paymentStep" url="{##cms.paymentStep.url##}" method="post" content-type="application/json"
    run="atclient" triggers="cms.paymentStep" if="{##cms.paymentStep.run|(false)##}" body='{
        "rkey": "[##cms.cookie.rkey##]",
        "dmnid": "[##cms.cms.domainid##]",
        "SessionId": "{##cms.paymentStep.SessionId##}",
        "providerId": "{##cms.paymentStep.providerId##}",
        "productType": "{##cms.paymentStep.productType##}",
        "lid":"1"
    }' onprocessed='onProcessedPaymentStep'>
</basis>