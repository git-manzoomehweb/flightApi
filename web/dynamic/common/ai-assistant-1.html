<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Assistant - Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾Ø±ÙˆØ§Ø²</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary: #48a392;
            --secondary: #3b9381;
        }

        body {
            font-family: 'Vazirmatn', sans-serif;
        }

        /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø³ØªÙˆÙ… ÙÙ‚Ø· */
        @keyframes blink {

            0%,
            90%,
            100% {
                opacity: 1;
                transform: scaleY(1);
            }

            95% {
                opacity: 0.3;
                transform: scaleY(0.1);
            }
        }

        @keyframes bounce {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-8px);
            }

            60% {
                transform: translateY(-4px);
            }
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.2);
                opacity: 0.7;
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes typingAnimation {

            0%,
            60%,
            100% {
                opacity: 0.3;
                transform: scale(0.8);
            }

            30% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .robot-eye {
            animation: blink 4s infinite;
        }

        .robot-logo {
            animation: bounce 2s ease-in-out infinite;
        }

        .robot-antenna::after {
            animation: pulse 2s infinite;
        }

        .message {
            animation: slideIn 0.3s ease-out;
        }

        .typing-dot {
            animation: typingAnimation 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        .robot-antenna::after {
            content: '';
            position: absolute;
            top: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            background: #ef4444;
            border-radius: 50%;
        }

        .robot-container {
            animation: robotFloat 3s ease-in-out infinite;
        }

        @keyframes robotFloat {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        .luggage {
            animation: luggageFloat 3s ease-in-out infinite;
        }

        @keyframes luggageFloat {

            0%,
            100% {
                transform: translateY(0px) rotate(12deg);
            }

            50% {
                transform: translateY(-4px) rotate(12deg);
            }
        }

        /* Enhanced eye blink */
        .robot-eye {
            animation: enhancedBlink 4s infinite;
        }

        @keyframes enhancedBlink {

            0%,
            90%,
            100% {
                opacity: 1;
                transform: scaleY(1);
                box-shadow: 0 0 12px #14b8a6;
            }

            95% {
                opacity: 0.3;
                transform: scaleY(0.1);
                box-shadow: 0 0 4px #14b8a6;
            }
        }

        .ltr {
            direction: ltr;
        }
    </style>
</head>

<body class="min-h-screen flex justify-center items-center p-6 pb-12">

    <!-- Main Container -->
    <main class="book-layout__main w-[1280px] min-w-[1200px] max-w-[1400px] h-[90vh] min-h-[700px]"
        data-sessionid="[##db.dmntoken.dmntoken##]" data-dmnid="[##cms.cms.domainid##]"
        data-lid="[##cms.query.lang|(2)##]">

        <!-- BasisCore Database Connection -->
        <basis core="dbsource" source="trustloginapi" name="db" useragent="[##cms.request.user-agent##]"
            ip="[##cms.request.clientip##]">
            <member name="dmntoken" type="scalar" request="dmntoken" />
        </basis>

        <!-- BasisCore API Components -->
        <basis core="api" name="flight.response" url="https://www.basisfly.com/ai/flight/offers" method="post"
            triggers="flight.request"
            body='{"text":"{##flight.request.text##}","dmnid":"{##flight.request.dmnid##}","sessionId":"[##db.dmntoken.dmntoken##]","lid":"[##cms.query.lang##]"}'
            if="{##flight.request.run|(false)##}" run="atclient" onprocessed="handleApiResponse">
        </basis>

        <basis core="api" name="offers.response" url="https://www.basisfly.com/ai/flight/get-offer" method="post"
            triggers="offers.request" body='{##offers.request.value##}' onprocessing="handleLoadingResponse"
            if="{##offers.request##}" run="atclient" onprocessed="handleApiResponse">
        </basis>

        <basis core="api" name="schema.response" run="atclient"
            url="https://api.trust-login.com/schema/{##login.response.rkey##}/fa" method="get"
            onprocessed="handleUserSchema" if="{##login.response##}" triggers="login.response">
        </basis>

        <basis core="api" name="selectuser.response" run="atclient" url="https://api.trust-login.com/selectuser"
            method="post" body='{"hashid":"{##selectuser.request.hashid##}","userid":{##selectuser.request.userid##}}'
            onprocessed="handleApiResponse" if="{##selectuser.request.run|(false)##}" triggers="selectuser.request">
        </basis>

        <basis core="call" file="Client_BasisCore_Script.inc"></basis>

        <!-- Desktop Layout -->
        <div
            class="bg-white/95 backdrop-blur-2xl rounded-3xl shadow-2xl overflow-hidden h-full grid grid-cols-[350px_1fr]">

            <!-- Left Sidebar -->
            <div class="bg-gradient-to-b from-teal-500 to-teal-400 text-white p-6 flex flex-col min-h-full">

                <!-- Header with Robot -->
                <div class="text-center mb-8">
                    <div class="relative mx-auto mb-4">
                        <!-- Complete Robot with Luggage -->
                        <div class="robot-container relative">
                            <!-- Luggage -->
                            <div
                                class="luggage absolute bottom-0 right-8 w-8 h-10 bg-slate-700 rounded-lg transform rotate-12 animate-pulse">
                                <!-- Ø¯Ø³ØªÙ‡ Ø¨Ù„Ù†Ø¯ ØªÙ„Ø³Ú©ÙˆÙ¾ÛŒ -->
                                <div
                                    class="absolute -top-2 left-1/2 transform -translate-x-1/2 w-0.5 h-4 bg-slate-600 rounded-full">
                                </div>
                                <div
                                    class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-3 h-1 bg-slate-600 rounded-full">
                                </div>

                                <!-- Luggage handle -->
                                <div class="w-1 h-3 bg-slate-800 rounded-full mx-auto mb-1"></div>
                                <!-- Luggage details -->
                                <div class="w-6 h-1 bg-slate-800 rounded mx-auto mb-1"></div>
                                <div class="w-4 h-1 bg-slate-800 rounded mx-auto"></div>
                                <!-- Wheels -->
                                <div class="absolute bottom-0 left-1 w-1.5 h-1.5 bg-slate-900 rounded-full"></div>
                                <div class="absolute bottom-0 right-1 w-1.5 h-1.5 bg-slate-900 rounded-full"></div>
                            </div>

                            <!-- Robot Body -->
                            <div
                                class="robot-logo w-20 h-20 bg-gradient-to-b from-gray-100 to-gray-200 rounded-full flex items-center justify-center relative shadow-xl mx-auto">

                                <!-- Robot Head (Screen) -->
                                <div
                                    class="w-16 h-10 bg-gradient-to-b from-gray-800 to-gray-900 rounded-xl relative flex items-center justify-center overflow-hidden">
                                    <!-- Screen glow effect -->
                                    <div
                                        class="absolute inset-0 bg-gradient-to-t from-transparent to-white/10 rounded-xl">
                                    </div>

                                    <!-- Eyes -->
                                    <div class="flex gap-3 relative z-10">
                                        <div
                                            class="robot-eye w-3 h-2 bg-teal-400 rounded-full shadow-lg shadow-teal-400/50 relative transform">
                                            <!-- Eye shine -->
                                            <div class="absolute top-0 left-0.5 w-1 h-1 bg-white/70 rounded-full"></div>
                                        </div>
                                        <div
                                            class="robot-eye w-3 h-2 bg-teal-400 rounded-full shadow-lg shadow-teal-400/50 relative transform">
                                            <!-- Eye shine -->
                                            <div class="absolute top-0 left-0.5 w-1 h-1 bg-white/70 rounded-full"></div>
                                        </div>
                                    </div>

                                    <!-- Wide Smiling Mouth -->
                                    <div class="absolute bottom-1.5 left-1/2 transform -translate-x-1/2">
                                        <div class="w-4 h-2 border-b-4 border-teal-400 rounded-b-full opacity-90"></div>
                                    </div>
                                </div>

                                <!-- Robot Body Details -->
                                <!-- Arms -->
                                <div
                                    class="absolute left-1 top-1/2 w-3 h-6 bg-gradient-to-b from-gray-100 to-gray-200 rounded-full transform -translate-y-1/2 rotate-12 animate-pulse">
                                </div>
                                <div
                                    class="absolute right-1 top-1/2 w-3 h-6 bg-gradient-to-b from-gray-100 to-gray-200 rounded-full transform -translate-y-1/2 -rotate-12 animate-pulse">
                                </div>

                                <!-- Head connection -->
                                <div
                                    class="absolute top-2 left-1/2 transform -translate-x-1/2 w-4 h-2 bg-gray-300 rounded-full">
                                </div>
                            </div>
                        </div>
                    </div>
                    <h1 class="text-2xl font-bold mb-2">Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾Ø±ÙˆØ§Ø² BasisFly</h1>
                    <p class="text-teal-100 text-sm">Ø¨Ø±Ø§ÛŒ ÛŒØ§ÙØªÙ† Ø¨Ù‡ØªØ±ÛŒÙ† Ù¾Ø±ÙˆØ§Ø²Ù‡Ø§ Ø¯Ø± Ø®Ø¯Ù…Øª Ø´Ù…Ø§</p>
                    <div class="flex items-center justify-center gap-2 mt-3 text-sm">
                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                        <span class="text-teal-100">Ø¢Ù†Ù„Ø§ÛŒÙ† Ùˆ Ø¢Ù…Ø§Ø¯Ù‡ Ú©Ù…Ú©</span>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="space-y-3 mb-6">
                    <h3 class="text-lg font-semibold mb-4 text-teal-100">ğŸš€ Ø®Ø¯Ù…Ø§Øª Ø³Ø±ÛŒØ¹</h3>

                    <button
                        class="menu-item w-full bg-white/10 hover:bg-white/20 rounded-xl p-4 transition-all duration-300 hover:scale-105 hover:shadow-lg"
                        data-bc-click="searchFlight">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-teal-400/30 rounded-lg flex items-center justify-center text-2xl">
                                ğŸ”</div>
                            <div class="text-right">
                                <h4 class="font-semibold">Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾Ø±ÙˆØ§Ø²</h4>
                                <p class="text-teal-100 text-sm">Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¨Ù‡ØªØ±ÛŒÙ† Ù¾Ø±ÙˆØ§Ø²Ù‡Ø§</p>
                            </div>
                        </div>
                    </button>

                    <button
                        class="menu-item w-full bg-white/10 hover:bg-white/20 rounded-xl p-4 transition-all duration-300 hover:scale-105 hover:shadow-lg"
                        data-bc-click="bookTicket">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-teal-400/30 rounded-lg flex items-center justify-center text-2xl">
                                ğŸ«</div>
                            <div class="text-right">
                                <h4 class="font-semibold">Ø±Ø²Ø±Ùˆ Ø¨Ù„ÛŒØ·</h4>
                                <p class="text-teal-100 text-sm">Ø±Ø²Ø±Ùˆ Ùˆ Ø®Ø±ÛŒØ¯ Ø¨Ù„ÛŒØ· Ù¾Ø±ÙˆØ§Ø²</p>
                            </div>
                        </div>
                    </button>

                    <button
                        class="menu-item w-full bg-white/10 hover:bg-white/20 rounded-xl p-4 transition-all duration-300 hover:scale-105 hover:shadow-lg"
                        data-bc-click="checkStatus">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-teal-400/30 rounded-lg flex items-center justify-center text-2xl">
                                ğŸ“Š</div>
                            <div class="text-right">
                                <h4 class="font-semibold">ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±ÙˆØ§Ø²</h4>
                                <p class="text-teal-100 text-sm">Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ùˆ ØªØ§Ø®ÛŒØ±Ø§Øª</p>
                            </div>
                        </div>
                    </button>

                    <button
                        class="menu-item w-full bg-white/10 hover:bg-white/20 rounded-xl p-4 transition-all duration-300 hover:scale-105 hover:shadow-lg"
                        data-bc-click="support">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-teal-400/30 rounded-lg flex items-center justify-center text-2xl">
                                ğŸ†˜</div>
                            <div class="text-right">
                                <h4 class="font-semibold">Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</h4>
                                <p class="text-teal-100 text-sm">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ Ùˆ Ø­Ù„ Ù…Ø´Ú©Ù„</p>
                            </div>
                        </div>
                    </button>
                </div>

                <!-- FAQ Section -->
                <!-- <div class="mt-auto">
                    <button class="w-full bg-white/10 hover:bg-white/20 rounded-xl p-4 transition-all duration-300"
                        onclick="toggleFAQ()">
                        <div class="flex items-center justify-between">
                            <span class="font-semibold">â“ Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„</span>
                            <svg id="faq-arrow" class="w-5 h-5 transition-transform duration-300" fill="currentColor"
                                viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </button>

                    <div id="faq-content" class="mt-3 space-y-2 max-h-0 overflow-hidden transition-all duration-300">
                        <button
                            class="w-full text-right bg-white/5 hover:bg-white/10 rounded-lg p-3 text-sm transition-colors"
                            data-bc-click="faq1">
                            Ú†Ø·ÙˆØ± Ù¾Ø±ÙˆØ§Ø² Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†Ù…ØŸ
                        </button>
                        <button
                            class="w-full text-right bg-white/5 hover:bg-white/10 rounded-lg p-3 text-sm transition-colors"
                            data-bc-click="faq2">
                            Ú†Ø·ÙˆØ± Ø¨Ù„ÛŒØ· Ø±Ø²Ø±Ùˆ Ú©Ù†Ù…ØŸ
                        </button>
                        <button
                            class="w-full text-right bg-white/5 hover:bg-white/10 rounded-lg p-3 text-sm transition-colors"
                            data-bc-click="faq3">
                            ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±ÙˆØ§Ø² Ø±Ùˆ Ú†Ø·ÙˆØ± Ú†Ú© Ú©Ù†Ù…ØŸ
                        </button>
                        <button
                            class="w-full text-right bg-white/5 hover:bg-white/10 rounded-lg p-3 text-sm transition-colors"
                            data-bc-click="faq4">
                            Ú†Ø·ÙˆØ± Ø¨Ù„ÛŒØ· Ú©Ù†Ø³Ù„ Ú©Ù†Ù…ØŸ
                        </button>
                    </div>
                </div> -->
            </div>

            <!-- Main Chat Area -->
            <div class="flex flex-col min-h-full bg-white">

                <!-- Chat Header -->
                <div class="bg-gradient-to-r from-teal-50 to-teal-50 border-b border-teal-200 p-6 shrink-0">
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Ú†Øª Ø¨Ø§ Ø¯Ø³ØªÛŒØ§Ø±</h2>
                            <p class="text-gray-600">Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ø³ÙˆØ§Ù„ ÛŒØ§ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯</p>
                        </div>
                        <div class="flex gap-3">
                            <a tel=""
                                class="w-10 h-10 bg-teal-100 hover:bg-teal-200 rounded-lg flex items-center justify-center transition-colors">
                                ğŸ“
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Messages Container -->
                <div id="messages-container" class="flex-1 overflow-y-auto p-6 bg-gray-50 space-y-4 min-h-0">
                    <!-- Welcome Message -->
                    <div class="message flex gap-4 max-w-4xl">
                        <div
                            class="w-12 h-12 bg-gradient-to-br from-teal-500 to-teal-400 rounded-full flex items-center justify-center text-white text-xl shadow-lg">
                            <img src="[##cms.cms.cdn##]/booking/images/chat-ai-icon.png" width="" height=""
                                alt="chat-ai-icon" class="mx-auto">
                        </div>
                        <div class="bg-white rounded-2xl rounded-br-md p-5 shadow-lg border border-gray-100 flex-1">
                            <p class="text-gray-800 leading-relaxed">Ø³Ù„Ø§Ù…! ğŸ‘‹ Ù…Ù† Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾Ø±ÙˆØ§Ø² Ø´Ù…Ø§ Ù‡Ø³ØªÙ….</p>
                            <p class="text-gray-800 leading-relaxed mt-2">Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ø§Ø² Ù…Ù†ÙˆÛŒ Ø³Ù…Øª Ø±Ø§Ø³Øª ÛŒØ§ Ø¯Ø± Ù‚Ø³Ù…Øª Ù¾Ø§ÛŒÛŒÙ†
                                Ù¾ÛŒØ§Ù… Ø¨ÙØ±Ø³ØªÛŒØ¯.</p>
                        </div>
                    </div>

                    <!-- Typing Indicator -->
                    <div class="typing-indicator hidden flex gap-4 max-w-4xl" data-bc-typing-indicator>
                        <div
                            class="w-12 h-12 bg-gradient-to-br from-teal-500 to-teal-400 rounded-full flex items-center justify-center text-white text-xl">
                            <!-- Robot SVG Icon -->
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <!-- Outer teal circle -->
                                <circle cx="12" cy="12" r="11" stroke="#14b8a6" stroke-width="2" fill="none" />
                                <!-- Inner teal circle -->
                                <circle cx="12" cy="12" r="8.5" stroke="#0f766e" stroke-width="1.5" fill="none" />
                                <!-- Left headphone -->
                                <ellipse cx="5" cy="12" rx="2" ry="3" fill="#14b8a6" />
                                <!-- Right headphone -->
                                <ellipse cx="19" cy="12" rx="2" ry="3" fill="#14b8a6" />
                                <!-- Robot face capsule -->
                                <rect x="7" y="9" width="10" height="6" rx="3" fill="#1f2937" />
                                <!-- Left eye -->
                                <circle cx="10" cy="12" r="1.5" stroke="#10b981" stroke-width="1" fill="none" />
                                <circle cx="10" cy="12" r="0.5" fill="#10b981" />
                                <!-- Right eye -->
                                <circle cx="14" cy="12" r="1.5" stroke="#10b981" stroke-width="1" fill="none" />
                                <circle cx="14" cy="12" r="0.5" fill="#10b981" />
                            </svg>
                        </div>
                        <div class="bg-white rounded-2xl rounded-br-md p-5 shadow-lg border border-gray-100">
                            <div class="flex items-center gap-3">
                                <span class="text-gray-600 text-sm">Ø¯Ø± Ø­Ø§Ù„ ØªØ§ÛŒÙ¾</span>
                                <div class="flex gap-1">
                                    <div class="typing-dot w-2 h-2 bg-gray-400 rounded-full"></div>
                                    <div class="typing-dot w-2 h-2 bg-gray-400 rounded-full"></div>
                                    <div class="typing-dot w-2 h-2 bg-gray-400 rounded-full"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Input Area -->
                <basis core="group" name="check-lid" if="[##cms.query.lang|(2)##]=2">
                    <div class="bg-white border-t border-gray-200 p-6 shrink-0">
                        <div class="mb-2">
                            <span class="text-teal-500 text-sm font-medium">ğŸ’¬ Type your message here</span>
                        </div>
                        <form data-bc-chat-form>
                            <div
                                class="flex gap-4 items-end bg-gray-50 rounded-2xl p-3 border-2 border-teal-500 focus-within:border-teal-600 focus-within:bg-white transition-all">
                                <button type="button" class="text-gray-400 hover:text-teal-500 p-2 transition-colors"
                                    data-bc-attachment>
                                    ğŸ“
                                </button>
                                <_textarea id="message-input"
                                    class="flex-1 bg-transparent border-none outline-none resize-none p-3 text-gray-800 placeholder-gray-500 min-h-[24px] max-h-32 text-left"
                                    placeholder="Type your message..." data-bc-chat-input rows="1"></_textarea>
                                <button type="submit" id="send-button"
                                    class="bg-gradient-to-r from-teal-500 to-teal-400 hover:from-teal-600 hover:to-teal-500 text-white rounded-xl w-12 h-12 flex items-center justify-center transition-all hover:scale-105 shadow-lg"
                                    data-bc-send-btn>
                                    â¤
                                </button>
                            </div>
                        </form>
                    </div>
                </basis>

                <basis core="group" name="check-lid" if="[##cms.query.lang|(2)##]<>2">
                    <div class="bg-white border-t border-gray-200 p-6 shrink-0">
                        <div class="mb-2 text-right">
                            <span class="text-teal-500 text-sm font-medium">ğŸ’¬ Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ ØªØ§ÛŒÙ¾ Ú©Ù†ÛŒØ¯</span>
                        </div>
                        <form data-bc-chat-form>
                            <div
                                class="flex gap-4 items-end bg-gray-50 rounded-2xl p-3 border-2 border-teal-500 focus-within:border-teal-600 focus-within:bg-white transition-all">
                                <button type="button" class="text-gray-400 hover:text-teal-500 p-2 transition-colors"
                                    data-bc-attachment>
                                    ğŸ“
                                </button>
                                <_textarea id="message-input"
                                    class="flex-1 bg-transparent border-none outline-none resize-none p-3 text-gray-800 placeholder-gray-500 min-h-[24px] max-h-32 text-right"
                                    placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ ØªØ§ÛŒÙ¾ Ú©Ù†ÛŒØ¯..." data-bc-chat-input rows="1">
                                </_textarea>
                                <button type="submit" id="send-button"
                                    class="scale-x-[-1] bg-gradient-to-r from-teal-500 to-teal-400 hover:from-teal-600 hover:to-teal-500 text-white rounded-xl w-12 h-12 flex items-center justify-center transition-all hover:scale-105 shadow-lg"
                                    data-bc-send-btn>
                                    â¤
                                </button>
                            </div>
                        </form>
                    </div>
                </basis>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="fixed bottom-0 left-0 right-0 bg-gray-50/80 backdrop-blur-sm border-t border-gray-200 py-2 z-40">
        <div class="container mx-auto px-6">
            <div class="flex justify-center items-center">
                <p class="text-xs text-gray-500">
                    <span class="font-medium text-teal-600">Powered by BasisFlyAI</span>
                </p>
            </div>
        </div>
    </footer>

    <!-- Include Original JavaScript -->
    <script src="[##cms.cms.cdn##]/booking/js/ai-search.js?ver=1" type="text/javascript"></script>

    <!-- Enhanced UI JavaScript -->
    <script>
        // FAQ Toggle
        function toggleFAQ() {
            const content = document.getElementById('faq-content');
            const arrow = document.getElementById('faq-arrow');

            if (content.style.maxHeight === '0px' || content.style.maxHeight === '') {
                content.style.maxHeight = '250px';
                arrow.style.transform = 'rotate(180deg)';
            } else {
                content.style.maxHeight = '0px';
                arrow.style.transform = 'rotate(0deg)';
            }
        }

        // Enhanced UI functionality
        document.addEventListener('DOMContentLoaded', function () {
            // Auto-resize _textarea
            const chatInput = document.querySelector('[data-bc-chat-input]');
            if (chatInput) {
                chatInput.addEventListener('input', function () {
                    this.style.height = 'auto';
                    this.style.height = Math.min(this.scrollHeight, 128) + 'px';
                });

                // Submit on Enter
                // chatInput.addEventListener('keydown', function (e) {
                //     if (e.key === 'Enter' && !e.shiftKey) {
                //         e.preventDefault();
                //         document.querySelector('[data-bc-chat-form]').dispatchEvent(new Event('submit'));
                //     }
                // });
            }

            // Handle form submission
            const chatForm = document.querySelector('[data-bc-chat-form]');
            if (chatForm) {
                chatForm.addEventListener('submit', function (e) {
                    e.preventDefault();
                    const input = this.querySelector('[data-bc-chat-input]');
                    const message = input.value.trim();

                    if (message) {
                        if (typeof sendMessage === 'function') {
                            sendMessage();
                        }
                    }
                });
            }

            // Menu and FAQ handlers
            document.addEventListener('click', function (e) {
                if (e.target.closest('[data-bc-click]')) {
                    const action = e.target.closest('[data-bc-click]').getAttribute('data-bc-click');
                    handleQuickAction(action);
                }
            });
        });

        function handleQuickAction(action) {
            const messages = {
                'searchFlight': 'Ù…ÛŒâ€ŒØ®ÙˆØ§Ù… Ù¾Ø±ÙˆØ§Ø² Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†Ù… - Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ø¯Ø£ Ùˆ Ù…Ù‚ØµØ¯ Ø±Ùˆ Ø¨Ù‡Ù… Ø¨Ú¯ÛŒØ¯',
                'bookTicket': 'Ù…ÛŒâ€ŒØ®ÙˆØ§Ù… Ø¨Ù„ÛŒØ· Ø±Ø²Ø±Ùˆ Ú©Ù†Ù… - Ú©Ø¯ÙˆÙ… Ù¾Ø±ÙˆØ§Ø² Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±Ø¯ÛŒØ¯ØŸ',
                'checkStatus': 'Ù…ÛŒâ€ŒØ®ÙˆØ§Ù… ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±ÙˆØ§Ø² Ø±Ùˆ Ú†Ú© Ú©Ù†Ù… - Ø´Ù…Ø§Ø±Ù‡ Ù¾Ø±ÙˆØ§Ø² Ø±Ùˆ Ø¨Ø¯ÛŒØ¯',
                'support': 'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¯Ø§Ø±Ù… - Ú†Ù‡ Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ',

                // FAQ Items
                'faq1': 'Ú†Ø·ÙˆØ± Ù¾Ø±ÙˆØ§Ø² Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†Ù…ØŸ',
                'faq2': 'Ú†Ø·ÙˆØ± Ø¨Ù„ÛŒØ· Ø±Ø²Ø±Ùˆ Ú©Ù†Ù…ØŸ',
                'faq3': 'ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±ÙˆØ§Ø² Ø±Ùˆ Ú†Ø·ÙˆØ± Ú†Ú© Ú©Ù†Ù…ØŸ',
                'faq4': 'Ú†Ø·ÙˆØ± Ø¨Ù„ÛŒØ· Ú©Ù†Ø³Ù„ Ú©Ù†Ù…ØŸ'
            };

            if (messages[action]) {
                const input = document.querySelector('[data-bc-chat-input]');
                if (input && typeof sendMessage === 'function') {
                    input.value = messages[action];
                    sendMessage();
                }
            }
        }

        function addEnhancedMessage(content, type) {
            const container = document.getElementById('messages-container');
            if (!container) return;

            const messageDiv = document.createElement('div');
            messageDiv.className = `message flex gap-4 max-w-4xl ${type === 'user' ? 'flex-row-reverse self-end' : ''}`;

            const bgClass = type === 'user' ?
                'bg-gradient-to-br from-indigo-500 to-purple-600' :
                'bg-gradient-to-br from-teal-500 to-teal-400';
            const bubbleClass = type === 'user' ?
                'bg-gradient-to-r from-teal-500 to-teal-400 text-white rounded-2xl rounded-bl-md' :
                'bg-white rounded-2xl rounded-br-md border border-gray-100';

            // Avatar content
            const avatarContent = type === 'user' ? 'ğŸ‘¤' : `
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="11" stroke="#14b8a6" stroke-width="2" fill="none"/>
                    <circle cx="12" cy="12" r="8.5" stroke="#0f766e" stroke-width="1.5" fill="none"/>
                    <ellipse cx="5" cy="12" rx="2" ry="3" fill="#14b8a6"/>
                    <ellipse cx="19" cy="12" rx="2" ry="3" fill="#14b8a6"/>
                    <rect x="7" y="9" width="10" height="6" rx="3" fill="#1f2937"/>
                    <circle cx="10" cy="12" r="1.5" stroke="#10b981" stroke-width="1" fill="none"/>
                    <circle cx="10" cy="12" r="0.5" fill="#10b981"/>
                    <circle cx="14" cy="12" r="1.5" stroke="#10b981" stroke-width="1" fill="none"/>
                    <circle cx="14" cy="12" r="0.5" fill="#10b981"/>
                </svg>
            `;

            messageDiv.innerHTML = `
                <div class="w-12 h-12 ${bgClass} rounded-full flex items-center justify-center text-white text-xl shadow-lg">
                    ${avatarContent}
                </div>
                <div class="${bubbleClass} p-5 shadow-lg flex-1">
                    <p class="${type === 'user' ? 'text-white' : 'text-gray-800'} leading-relaxed">${content}</p>
                    ${type === 'assistant' ? `
                        <div class="flex gap-2 mt-4 opacity-70">
                            <button class="action-btn p-2 hover:bg-gray-100 rounded-lg transition-colors">ğŸ‘</button>
                            <button class="action-btn p-2 hover:bg-gray-100 rounded-lg transition-colors">ğŸ‘</button>
                            <button class="action-btn p-2 hover:bg-gray-100 rounded-lg transition-colors">ğŸ“‹</button>
                            <button class="action-btn p-2 hover:bg-gray-100 rounded-lg transition-colors">ğŸ”—</button>
                        </div>
                    ` : ''}
                </div>
            `;

            const typingIndicator = document.querySelector('.typing-indicator');
            container.insertBefore(messageDiv, typingIndicator);
            container.scrollTop = container.scrollHeight;
        }

        // Enhanced typing indicator functions
        function showTypingIndicator() {
            const indicator = document.querySelector('[data-bc-typing-indicator]');
            if (indicator) {
                indicator.classList.remove('hidden');
                indicator.classList.add('flex');
                document.querySelector('#messages-container').scrollTop =
                    document.querySelector('#messages-container').scrollHeight;
            }
        }

        function hideTypingIndicator() {
            const indicator = document.querySelector('[data-bc-typing-indicator]');
            if (indicator) {
                indicator.classList.add('hidden');
                indicator.classList.remove('flex');
            }
        }
    </script>
</body>

</html>