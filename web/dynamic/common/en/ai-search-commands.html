<!-- Get Dmn Token -->
<basis core="dbsource" source="trustloginapi" name="db" useragent="[##cms.request.user-agent##]"
    ip="[##cms.request.clientip##]">
    <member name="dmntoken" type="scalar" request="dmntoken" />
</basis>
<!-- Get Flight Info -->
<basis core="api" name="flight.response" url="https://www.basisfly.com/ai/flight/offers" method="post"
    triggers="flight.request"
    body='{"text":"{##flight.request.text##}","dmnid":"{##flight.request.dmnid##}","sessionId":"[##db.dmntoken.dmntoken##]","lid":"2"}'
    if="{##flight.request.run|(false)##}" run="atclient" onprocessed="handleApiResponse">
</basis>
<!-- Get Offer Info -->
<basis core="api" name="offers.response" url="https://www.basisfly.com/ai/flight/get-offer" method="post"
    triggers="offers.request" body='{##offers.request.value##}' onprocessing="handleLoadingResponse"
    if="{##offers.request##}" run="atclient" onprocessed="handleApiResponse">
</basis>
<!-- Get User Info -->
<basis core="api" name="schema.response" run="atclient"
    url="https://api.trust-login.com/schema/{##login.response.rkey##}/en" method="get"
    onprocessed="handleUserSchema" if="{##login.response##}" triggers="login.response">
</basis>
<!-- Get Comapny Name -->
<basis core="dbsource" source="basiscore" name="db" mid="5" lid="2" usedforid="[##cms.cms.ownerid##]">
    <member name="compamy-name" type="view" postsql="SELECT * FROM [db.compamy-name] WHERE TypeID IN (150)" />
</basis>